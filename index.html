<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Visualizador de Algoritmos de Ordenamiento</title>

    <!-- PyScript -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        #controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        #array {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 260px;
            margin-top: 20px;
        }

        .bar {
            width: 25px;
            margin: 0 3px;
            background: steelblue;
            transition: 0.3s;
        }

        .highlight {
            background: orange !important;
        }

        .swap {
            background: red !important;
        }
    </style>
</head>
<body>

    <h1>Visualizador de Algoritmos de Ordenamiento</h1>

    <div style="text-align: center; margin-bottom: 20px;">
        <label>Algoritmo:</label>
        <select id="algoritmo">
            <option value="sort_bubble">Bubble Sort</option>
            <option value="sort_selection">Selection Sort</option>
            <option value="sort_insertion">Insertion Sort</option>
        </select>

        <button id="btn-iniciar">Iniciar</button>
    </div>

    <div id="controls">
        <button id="btn-step" disabled>Paso</button>
        <button id="btn-auto" disabled>Auto</button>
        <button id="btn-reset" disabled>Reset</button>
    </div>

    <div id="array"></div>

    <!-- PyScript -->
    <py-script>
import js
from pyodide.http import pyfetch
import asyncio
import importlib

# Estado
items = [30, 12, 60, 22, 5, 50, 41, 33]
alg = None
auto_running = False

# -------------------------
# Cargar y dibujar barras
# -------------------------
def render_array(a, highlight=None, swap=False):
    container = js.document.getElementById("array")
    container.innerHTML = ""

    for i, val in enumerate(a):
        bar = js.document.createElement("div")
        bar.classList.add("bar")
        bar.style.height = f"{val * 4}px"

        if highlight is not None and (i == highlight[0] or i == highlight[1]):
            bar.classList.add("swap" if swap else "highlight")

        container.appendChild(bar)

render_array(items)

# -------------------------
# Cargar algoritmo din√°mico
# -------------------------
async def load_algorithm(name):
    url = f"./algorithms/{name}.py"
    response = await pyfetch(url)
    
    code = await response.text()
    
    module_name = f"algor_
